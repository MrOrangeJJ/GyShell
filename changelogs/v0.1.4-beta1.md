# v0.1.4-beta1 Release Notes

### English

**New Features**

- **Seamless Mid-Run User Insertion**: You can now insert a new user message while the Agent is running. In normal mode, GyShell will interrupt the current Agent run and immediately continue with the inserted message in the same session context.
- **Queue Mode During Active Sessions**: Queue mode now supports editing and adding cards while a session is already running, so you can keep refining queued requests without stopping the session.
- **Live Mode Switching (Normal <-> Queue)**: You can switch between normal mode and queue mode during execution. The run state is inherited seamlessly, so workflow control is more flexible without resetting the session.
- **Gateway-Native Run Control**: Interruption and continuation are now coordinated through the Gateway pipeline, enabling Agent restarts without ending the session and preparing the architecture for future multi-client orchestration.
- **Session Rename Support**: Added session rename capability through the Gateway communication path.

**Optimizations & Refinements**

- **Unified IPC Through Gateway**: Refactored major IPC pathways to route through Gateway for cleaner boundaries between session lifecycle, agent lifecycle, and frontend updates.
- **Action/Input Prompt Pipeline Cleanup**: Improved input-kind handling and user-interrupt tagging flow to make history assembly and prompt construction more maintainable.
- **History Panel Improvements**: Upgraded chat history dialog interactions and related UI behavior.
- **Queue/Input UI Polish**: Improved queue controls, card interaction behavior, and related styles for more consistent operation in running sessions.
- **Bug Fixes & Stability**: Multiple fixes across terminal backends, agent helpers, and session state synchronization.

**Version Check & Privacy Note**

- Added a dedicated **Version** sub-page in Settings with detailed version metadata and a manual **Check Updates** action.
- Added startup auto-check and an update dialog when a newer version is available, guiding users to manually download from the release page.
- Implemented update source via GitHub repository `version.json` (Scheme C), including ETag-based cache to reduce repeated payload transfers.
- Added clear in-app privacy note in both Settings and update dialog: the app only requests version metadata from this GitHub repository and does not contact third-party update sites.

---

### 中文 (Chinese)

**新功能**

- **运行中插入用户消息**：现在可以在 Agent 运行过程中插入新消息。在普通模式下，GyShell 会中断当前 Agent 运行，并在同一 Session 上下文中立刻继续处理插入消息。
- **运行中 Queue 可编辑**：Session 已在运行时，Queue 模式也支持继续新增与编辑卡片，无需先停掉会话。
- **普通模式与 Queue 模式可运行中切换**：执行过程中可直接在普通模式与 Queue 模式之间切换，并无缝继承当前运行状态，不需要重置 Session。
- **基于 Gateway 的原生中断续跑**：中断与续跑逻辑统一走 Gateway 通道，实现“结束 Agent 不结束 Session”，并为后续多客户端协同控制打好基础。
- **Session 重命名能力**：通过 Gateway 通信链路新增 Session 重命名支持。

**优化与改进**

- **IPC 通信统一收口到 Gateway**：重构了关键 IPC 路径，进一步明确 Session 生命周期、Agent 生命周期与前端状态更新的边界。
- **输入/Prompt 构造链路优化**：改进输入类型与中途插入标签处理流程，让历史构建和 Prompt 组装更清晰、更易维护。
- **历史面板体验优化**：改进了聊天历史对话面板及相关交互体验。
- **Queue 与输入区 UI 打磨**：优化了 Queue 控件、卡片交互与相关样式，在运行态下操作更一致。
- **稳定性修复**：修复多项涉及终端后端、Agent 辅助逻辑与 Session 状态同步的问题。

**版本检查与隐私说明**

- 新增设置页 **Version** 子页面，集中展示版本信息并提供手动 **检查更新** 按钮。
- 新增应用启动后的自动版本检查；当检测到新版本时弹窗提示，并引导用户手动前往发布页下载。
- 版本来源改为 GitHub 仓库内 `version.json`（方案 C），并使用 ETag 缓存降低重复请求开销。
- 在 Version 设置页与更新弹窗中新增明确隐私说明：应用只会向本项目 GitHub 仓库请求版本信息，不会向第三方更新站点发起请求。

